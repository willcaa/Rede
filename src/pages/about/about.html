<ion-header>
  <ion-navbar color="dark"> 

    <ion-title>
      Criar Publicação
    </ion-title>

    <ion-buttons end>
      <button ion-button *ngIf="!publicando" (click)="Publicar()">
        PUBLICAR
      </button>
      <!-- <button ion-button *ngIf="!publicando && postType != 1 && postType != 2" (click)="getUserPosition()">
          PUBLICAR
        </button> -->
      
    </ion-buttons>

  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-item>
    <ion-avatar item-start *ngIf="foto_usuario">
      <img [src]="getSrc(foto_usuario)">
    </ion-avatar>
    <h2>{{ nome_usuario }}</h2>
  </ion-item>

  <ion-item>
    <p>{{ checkin }}</p>
          <div style="overflow: hidden; max-height: 700px;" class="img_card" *ngIf="postType == 1">
            <ion-row>
                  <ion-col *ngFor="let imagem of images" style="min-width: 50%">
                    <ion-item *ngIf="images.length > 1"  [style.background-image]="getBackground(imagem)" style="background-size: cover; background-position-y: center; height: 200px; width: 100%; min-width: 45%;" (click)="ampliarImagem(imagem)">
                        <!-- <button ion-buttom item-left clear style="background: transparent;border: none;font-size:  30px;position: absolute;left: 84%;top: 0px;" (click)="excluiImgArray(imagem)">
                          <ion-icon name="md-close-circle"></ion-icon>
                        </button> -->
                    </ion-item>
                    <ion-item *ngIf="images.length <= 1" [style.background-image]="getBackground(imagem)" style="height: 340px; background-size: cover; background-position-y: center; height: 400pv; width: 100%; min-width: 45%;" (click)="ampliarImagem(imagem)">
                        <!-- <button ion-buttom item-left clear style="background: transparent;border: none;font-size:  30px;position: absolute;left: 84%;top: 0px;" (click)="excluiImgArray(imagem)">
                          <ion-icon name="md-close-circle"></ion-icon>
                        </button> -->
                    </ion-item>
                  </ion-col>
                </ion-row>
          </div>
    
    <div *ngIf='postType == 2 && videoId'>
      <div style="width: 100%;height: auto;">
          <video width="100%" height="auto" controls autoplay>
            <source src="{{ videoId }}" type="video/mp4">
          </video>
      </div>
    </div>
    <div *ngIf='postType == 3'>
        <div  *ngIf='linkPost'>
            <div>  
                <div style="width: 100px; float: left;">  
                 <img id="icon" style="width: 90px;" />     
                </div>  
                <div>  
                 <h2 id="title"></h2>  
                 <span id="description"></span>  
                </div>  
                <div> <h6 id="site"></h6></div>  
               </div>  
            <!-- <iframe [src]='sanitizer.bypassSecurityTrustResourceUrl(linkPost)' width="100%" height="auto" scrolling="NO" frameborder="0"></iframe> -->
          </div>
      <div style="width: 100%;height: auto;">
          <ion-item>
        <ion-input  [(ngModel)]="linkPost" type="text"  (change)="cahngeLink();" placeholder="Insira o link" ></ion-input>
      </ion-item>
      </div>
    </div>
    <div *ngIf='postType == 4'>
      <div  *ngIf='youtubeSaneado'>
        <iframe [src]='sanitizer.bypassSecurityTrustResourceUrl(youtubeSaneado)' width="100%" height="auto" frameborder="0"></iframe>
      </div>
      <p>{{youtubeSaneado}}</p>
      <div style="width: 100%;height: auto;">
        <ion-item>
          <ion-input  [(ngModel)]="linkYoutube" type="text"  (change)="cahngeYoutube()" placeholder="Insira o link do Youtube" ></ion-input>
        </ion-item>
      </div>
    </div>
    

  </ion-item>
  <ion-item [ngStyle]="{'height': altura}">
      <textarea class="area" [(ngModel)]="texto" [ngStyle]="{'height': altura}" rows="4" placeholder="O que gostaria de informar?" id="textoPost" (ngModelChange)="checkLength(texto)"></textarea>
  </ion-item>
  <ion-list style="margin-top: 50px;">
    <ion-item style="text-align: center;color: #3e9ef8;" (click)="getImages(); setPostType(1);">
      <img src="assets/imgs/janelas.png" alt="" style="width: 100px;"><br>
        Imagens
    </ion-item>
    <ion-item style="text-align: center;color: #3e9ef8;top: 40px;" (click)="getPicture(); setPostType(1);">
     <img src="assets/imgs/celular.png" alt="" style="width: 100px;"><br>
        Foto
    </ion-item>
  </ion-list>
</ion-content>
<ion-footer>
  </ion-footer>